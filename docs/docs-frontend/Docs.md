# TestIT | Документация для Frontend разработчика

## Обзор
Клиентская часть (frontend) построена на фреймворке Vue (NodeJS) со сборщиком Vite.

## Настройка среды разработки
На вашем компьютере должна быть установлена nodejs версии > 20
Рекомендуется использовать редактор кода VSCode с расширениями, которые описаны в [.vscode/extensions.json](/.vscode/extensions.json)
Установка зависимостей:
```bash
npm i
```
Запуск:
```bash
npm run dev
```
Линтинг:
```bash
npm run lint
```

## Работа с Api бэкенда
Взаимодействие с серверной частью приложения осуществляется с помощью библиотеки [open api client](https://www.npmjs.com/package/openapi-client-axios), которая генерирует код для api клиента, используя json openapi схему.
**Подробное описание схемы апи находится в файле [ApiSchema.pdf](./ApiSchema.pdf)**
### Переадресация на api
OpenApiClient всегда отправляет запросы на хост, на котором запущен фронтенд. Для переадресации нужно настроить vite, так, чтобы он отправлял запросы `api/*` на другой сервер. (См. [vite.config.ts](/vite.config.ts))

### Обновление типов
Если openapi схема обновилась, то надо обновить и api client. Для этого в папке проекта есть специальный скрипт: [update_openapi_types.sh](/update_openapi_types.sh)

### Аутенфикация и хранение состояния
При взаимодействии фронтенда и бэкенда используется JWT аутенфикация. Поэтому со стороны фронтенда требуется хранить jwt токены. Для этого используется [Pinia](https://pinia.vuejs.org/) - хранилище состояния. Его код находится в [/src/stores/auth.store.ts](/src/stores/auth.store.ts). Для автоматического добавления jwt токена в заголовок запроса используются возможности бибилиотеки axios - [/src/helpers/auth-header.ts](/src/helpers/auth-header.ts)

## Роутинг и представления
Весь frontend - это single page приложение, то есть переход между страницами реализуется с помощью перерендера уже существующей страницы. Этот функционал реализован с помощью встроенного во vue [vue-router](https://router.vuejs.org/). 
Вы можете найти разметку роутера в файле [router.ts](/src/helpers/router.ts).
Для каждого пути в роутере существует свое представление (view). Они находятся в папке [views](/src/views). При создании views используются компоненты из папки [components](/src/components/).
**Вся логика работы с апи должна быть именно в представлениях. Компоненты, взаимодействующие с апи протеворечат архитектуре.**

## Компоненты
- QuestionsList - список вопросов (тест). Состоит из вопросов - QuestionItem. Нужен при прохождении теста и предпоказа теста.
- EditableQuestionsList - редактируемый список вопросов (тест). Состоит из вопросов, но отдельного компонента для них нет. Нужен при создании теста.
- AnswersList - список ответов. Состоит из ответов, но отдельного компонента для них нет. Нужен при просмотре и предпросмотре данных ответов.

### QuillComponent
[Quill](https://quilljs.com/) - WYSIWYG редактор форматированного текста.
[VueQuill](https://vueup.github.io/vue-quill/) - Quill в виде компонента для vue js
QuillComponent, использующийся в этом приложении, написан с использованием VueQuill.

QuillComponent используется при рендере ТЕКСТА ВОПРОСА (как при чтении, так и при изменении).
Для того, чтобы изменение работало, необходимо указать параметр `v-model`. 

### Question bodies
Набор компонентов для отображения тел вопросов (поле для ввода кода, варианты ответа на радио вопрос, поле для ввода текста...). Все эти компоненты используются при рендере QuestionsList

### Editable question bodies
Набор компонентов для  редактируемых тел вопросов (поле для ввода кода, варианты ответа на радио вопрос, поле для ввода текста...). Все эти компоненты используются при рендере EditableQuestionsList

## Стилизация
### Внутри компонента
Для написания css-стилей для части одного компонента используйте
```html
<style scoped>
    .your styles {
        here:
    }
</style>
```

### Глобально
Для описания глобальных css-стилей (например, для кнопки, которая используется в разных компонентах) используйте файл [main.css](./src/assets/main.css)
